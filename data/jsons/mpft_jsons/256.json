{
  "id": 256,
  "repo": "kubernetes",
  "issue_url": "https://github.com/kubernetes/kubernetes/pull/133807",
  "pr_url": "https://github.com/kubernetes/kubernetes/pull/133807",
  "issue_description": "#### What type of PR is this?\r\n\r\n/kind flake\r\n\r\n#### What this PR does / why we need it:\r\n\r\nThis PR fixes issue #133763 where the ResourceSlice Controller test in the DRA (Dynamic Resource Allocation) e2e tests was experiencing flakiness due to insufficient timeouts.\r\n\r\n**Root Cause**: The test was failing intermittently because:\r\n- ResourceSlice operations were taking longer than expected\r\n- Default timeouts were too short for the test environment\r\n- Network latency and resource allocation delays caused test failures\r\n\r\n**Solution**: Increased timeouts for ResourceSlice Controller test to:\r\n- Provide sufficient time for resource operations to complete\r\n- Reduce test flakiness in various network conditions\r\n- Improve test reliability and stability\r\n\r\n**Impact**: More reliable DRA e2e tests, reducing false failures and improving CI stability.\r\n\r\n#### Which issue(s) this PR is related to:\r\n\r\nFixes #133763\r\n\r\n#### Special notes for your reviewer:\r\n\r\nThis fix addresses test reliability without changing test logic:\r\n\r\n- Increased timeouts to accommodate network and resource allocation delays\r\n- No changes to test behavior or assertions\r\n- Improves CI stability by reducing flaky test failures\r\n- Minimal change that only affects test timing\r\n\r\nThe fix is focused on improving test reliability rather than changing functionality.\r\n\r\n#### Does this PR introduce a user-facing change?\r\n\r\nNONE\r\n\r\n#### Additional documentation e.g., KEPs (Kubernetes Enhancement Proposals), usage docs, etc.:\r\n\r\nN/A",
  "files_changed": [
    {
      "filename": "test/e2e/dra/dra.go",
      "status": "modified",
      "patch": "@@ -2143,7 +2143,7 @@ var _ = framework.SIGDescribe(\"node\")(framework.WithLabel(\"DRA\"), func() {\n \t\t\t})\n \n \t\t\tginkgo.By(\"Creating slices\")\n-\t\t\tmutationCacheTTL := 10 * time.Second\n+\t\t\tmutationCacheTTL := 15 * time.Second\n \t\t\tcontroller, err := resourceslice.StartController(ctx, resourceslice.Options{\n \t\t\t\tDriverName:       driverName,\n \t\t\t\tKubeClient:       f.ClientSet,\n@@ -2165,7 +2165,7 @@ var _ = framework.SIGDescribe(\"node\")(framework.WithLabel(\"DRA\"), func() {\n \t\t\t})\n \n \t\t\t// Eventually we should have all desired slices.\n-\t\t\tgomega.Eventually(ctx, listSlices).WithTimeout(3 * time.Minute).Should(gomega.HaveField(\"Items\", gomega.HaveLen(numSlices)))\n+\t\t\tgomega.Eventually(ctx, listSlices).WithTimeout(5 * time.Minute).Should(gomega.HaveField(\"Items\", gomega.HaveLen(numSlices)))\n \n \t\t\t// Verify state.\n \t\t\texpectSlices, err := listSlices(ctx)\n@@ -2188,15 +2188,15 @@ var _ = framework.SIGDescribe(\"node\")(framework.WithLabel(\"DRA\"), func() {\n \n \t\t\t// One empty slice should remain, after removing the full ones and adding the empty one.\n \t\t\temptySlice := gomega.HaveField(\"Spec.Devices\", gomega.BeEmpty())\n-\t\t\tgomega.Eventually(ctx, listSlices).WithTimeout(2 * time.Minute).Should(gomega.HaveField(\"Items\", gomega.HaveExactElements(emptySlice)))\n+\t\t\tgomega.Eventually(ctx, listSlices).WithTimeout(3 * time.Minute).Should(gomega.HaveField(\"Items\", gomega.HaveExactElements(emptySlice)))\n \t\t\texpectStats = resourceslice.Stats{NumCreates: int64(numSlices) + 1, NumDeletes: int64(numSlices)}\n \n \t\t\t// There is a window of time where the ResourceSlice exists and is\n \t\t\t// returned in a list but before that ResourceSlice is accounted for\n \t\t\t// in the controller's stats, consisting mostly of network latency\n \t\t\t// between this test process and the API server. Wait for the stats\n \t\t\t// to converge before asserting there are no further changes.\n-\t\t\tgomega.Eventually(ctx, controller.GetStats).WithTimeout(30 * time.Second).Should(gomega.Equal(expectStats))\n+\t\t\tgomega.Eventually(ctx, controller.GetStats).WithTimeout(45 * time.Second).Should(gomega.Equal(expectStats))\n \n \t\t\tgomega.Consistently(ctx, controller.GetStats).WithTimeout(2 * mutationCacheTTL).Should(gomega.Equal(expectStats))\n \t\t})"
    }
  ],
  "fix_category": "WaitFor",
  "root_cause_category": "Time",
  "root_cause_subcategory": NaN
}