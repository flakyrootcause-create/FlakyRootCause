{
  "id": 427,
  "repo": "kubernetes",
  "issue_url": "https://github.com/kubernetes/kubernetes/pull/129369",
  "pr_url": "https://github.com/kubernetes/kubernetes/pull/129369",
  "issue_description": "[PR Linked Issue]\n### Failure cluster [fb94bb199721f2524f81](https://go.k8s.io/triage#fb94bb199721f2524f81)\r\n\r\n##### Error text:\r\n```\r\n[FAILED] deploying csi-hostpath driver: create ClusterRoleBinding: clusterrolebindings.rbac.authorization.k8s.io \"psp-csi-hostpath-role-ephemeral-9424\" already exists\r\nIn [It] at: test/e2e/storage/drivers/csi.go:280 @ 05/03/23 07:02:07.131\r\n\r\n```\r\n#### Recent failures:\r\n[5/10/2023, 11:15:07 PM ci-kubernetes-e2e-gce-cos-k8sstable1-default](https://prow.k8s.io/view/gs/kubernetes-jenkins/logs/ci-kubernetes-e2e-gce-cos-k8sstable1-default/1656407525098000384)\r\n[5/3/2023, 8:41:51 AM ci-kubernetes-e2e-gce-cos-k8sstable1-default](https://prow.k8s.io/view/gs/kubernetes-jenkins/logs/ci-kubernetes-e2e-gce-cos-k8sstable1-default/1653651043134738432)\r\n\r\n\r\n/kind failing-test\r\n/kind flake\r\n/sig storage",
  "files_changed": [
    {
      "filename": "test/e2e/storage/drivers/csi.go",
      "status": "modified",
      "patch": "@@ -235,7 +235,6 @@ func (h *hostpathCSIDriver) PrepareTest(ctx context.Context, f *framework.Framew\n \t// Create secondary namespace which will be used for creating driver\n \tdriverNamespace := utils.CreateDriverNamespace(ctx, f)\n \tdriverns := driverNamespace.Name\n-\ttestns := f.Namespace.Name\n \n \tginkgo.By(fmt.Sprintf(\"deploying %s driver\", h.driverInfo.Name))\n \tcancelLogging := utils.StartPodLogs(ctx, f, driverNamespace)\n@@ -328,7 +327,6 @@ func (h *hostpathCSIDriver) PrepareTest(ctx context.Context, f *framework.Framew\n \tcleanupFunc := generateDriverCleanupFunc(\n \t\tf,\n \t\th.driverInfo.Name,\n-\t\ttestns,\n \t\tdriverns,\n \t\tcancelLogging)\n \tginkgo.DeferCleanup(cleanupFunc)\n@@ -600,7 +598,6 @@ func (m *mockCSIDriver) PrepareTest(ctx context.Context, f *framework.Framework)\n \t// Create secondary namespace which will be used for creating driver\n \tm.driverNamespace = utils.CreateDriverNamespace(ctx, f)\n \tdriverns := m.driverNamespace.Name\n-\ttestns := f.Namespace.Name\n \n \tif m.embedded {\n \t\tginkgo.By(\"deploying csi mock proxy\")\n@@ -762,7 +759,6 @@ func (m *mockCSIDriver) PrepareTest(ctx context.Context, f *framework.Framework)\n \tdriverCleanupFunc := generateDriverCleanupFunc(\n \t\tf,\n \t\t\"mock\",\n-\t\ttestns,\n \t\tdriverns,\n \t\tcancelLogging)\n \n@@ -942,7 +938,6 @@ func (g *gcePDCSIDriver) GetSnapshotClass(ctx context.Context, config *storagefr\n }\n \n func (g *gcePDCSIDriver) PrepareTest(ctx context.Context, f *framework.Framework) *storageframework.PerTestConfig {\n-\ttestns := f.Namespace.Name\n \tcfg := &storageframework.PerTestConfig{\n \t\tDriver:    g,\n \t\tPrefix:    \"gcepd\",\n@@ -1000,7 +995,6 @@ func (g *gcePDCSIDriver) PrepareTest(ctx context.Context, f *framework.Framework\n \tcleanupFunc := generateDriverCleanupFunc(\n \t\tf,\n \t\t\"gce-pd\",\n-\t\ttestns,\n \t\tdriverns,\n \t\tcancelLogging)\n \tginkgo.DeferCleanup(cleanupFunc)\n@@ -1073,17 +1067,12 @@ func tryFunc(f func()) error {\n \n func generateDriverCleanupFunc(\n \tf *framework.Framework,\n-\tdriverName, testns, driverns string,\n+\tdriverName, driverns string,\n \tcancelLogging func()) func(ctx context.Context) {\n \n \t// Cleanup CSI driver and namespaces. This function needs to be idempotent and can be\n \t// concurrently called from defer (or AfterEach) and AfterSuite action hooks.\n \tcleanupFunc := func(ctx context.Context) {\n-\t\tginkgo.By(fmt.Sprintf(\"deleting the test namespace: %s\", testns))\n-\t\t// Delete the primary namespace but it's okay to fail here because this namespace will\n-\t\t// also be deleted by framework.Aftereach hook\n-\t\t_ = tryFunc(func() { f.DeleteNamespace(ctx, testns) })\n-\n \t\tginkgo.By(fmt.Sprintf(\"uninstalling csi %s driver\", driverName))\n \t\t_ = tryFunc(cancelLogging)\n "
    }
  ],
  "fix_category": "Setup/clean up state",
  "root_cause_category": "Test order dependency",
  "root_cause_subcategory": NaN
}