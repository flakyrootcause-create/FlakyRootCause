{
  "id": 376,
  "repo": "vscode",
  "issue_url": "https://github.com/microsoft/vscode/pull/244763",
  "pr_url": "https://github.com/microsoft/vscode/pull/244763",
  "issue_description": "[PR Linked Issue]\nBuild: https://dev.azure.com/monacotools/a6d41577-0fa3-498e-af22-257312ff0545/_build/results?buildId=317618\nChanges: https://github.com/Microsoft/vscode/compare/a58d48f...30dbfbb\n\nThe RandomInt, \"should include min and max\" unit test failed, which, if it were truly random and I if understand probability well enough, has a 1 in 20 trillion chance of happening (0.8 ^ 100).\n\n```\nrandomInt positive numbers max: 5, min: 0 should include min and max (reason: Expected 2,1,1,3,2,2,1,4,4,5,4,2,4,5,3,2,3,2,3,1,5,1,2,4,3,1,4,3,3,2,1,1,1,4,2,3,5,4,3,2,1,1,1,1,2,3,1,1,3,3,2,3,3,5,1,3,3,2,4,2,2,2,4,4,1,4,1,1,5,4,5,3,3,2,3,4,3,1,3,2,2,4,2,4,2,2,3,5,3,2,4,3,4,1,1,2,5,2,5,4 to include 0.\n```",
  "files_changed": [
    {
      "filename": "src/vs/base/common/numbers.ts",
      "status": "modified",
      "patch": "@@ -102,7 +102,7 @@ export function isPointWithinTriangle(\n /**\n  * Function to get a (pseudo)random integer from a provided `max`...[`min`] range.\n  * Both `min` and `max` values are inclusive. The `min` value is optional and defaults\n- * to `0` if not explicitely specified.\n+ * to `0` if not explicitly specified.\n  *\n  * @throws in the next cases:\n  * \t- if provided `min` or `max` is not a number"
    },
    {
      "filename": "src/vs/base/test/common/numbers.test.ts",
      "status": "modified",
      "patch": "@@ -54,8 +54,8 @@ suite('randomInt', () => {\n \t\t\t\t});\n \t\t\t}\n \n-\t\t\ttest(`should include min and max`, async () => {\n-\t\t\t\tlet iterations = 100;\n+\t\t\ttest('should include min and max', async () => {\n+\t\t\t\tlet iterations = 125;\n \t\t\t\tconst results = [];\n \t\t\t\twhile (iterations-- > 0) {\n \t\t\t\t\tresults.push(randomInt(max, min));\n@@ -74,9 +74,9 @@ suite('randomInt', () => {\n \t};\n \n \tsuite('positive numbers', () => {\n-\t\ttestRandomIntUtil(5, 2, 'max: 5, min: 2');\n-\t\ttestRandomIntUtil(5, 0, 'max: 5, min: 0');\n-\t\ttestRandomIntUtil(5, undefined, 'max: 5, min: undefined');\n+\t\ttestRandomIntUtil(4, 2, 'max: 4, min: 2');\n+\t\ttestRandomIntUtil(4, 0, 'max: 4, min: 0');\n+\t\ttestRandomIntUtil(4, undefined, 'max: 4, min: undefined');\n \t\ttestRandomIntUtil(1, 0, 'max: 0, min: 0');\n \t});\n \n@@ -137,14 +137,14 @@ suite('randomInt', () => {\n \n \t\ttest('should throw if \"min\" is > \"max\" #5', () => {\n \t\t\tassert.throws(() => {\n-\t\t\t\trandomInt(-5, 0);\n-\t\t\t}, `\"max\"(-5) param should be greater than \"min\"(0).\"`);\n+\t\t\t\trandomInt(-4, 0);\n+\t\t\t}, `\"max\"(-4) param should be greater than \"min\"(0).\"`);\n \t\t});\n \n \t\ttest('should throw if \"min\" is > \"max\" #6', () => {\n \t\t\tassert.throws(() => {\n-\t\t\t\trandomInt(-5);\n-\t\t\t}, `\"max\"(-5) param should be greater than \"min\"(0).\"`);\n+\t\t\t\trandomInt(-4);\n+\t\t\t}, `\"max\"(-4) param should be greater than \"min\"(0).\"`);\n \t\t});\n \n \t\ttest('should throw if \"max\" is `NaN`', () => {\n@@ -155,7 +155,7 @@ suite('randomInt', () => {\n \n \t\ttest('should throw if \"min\" is `NaN`', () => {\n \t\t\tassert.throws(() => {\n-\t\t\t\trandomInt(5, NaN);\n+\t\t\t\trandomInt(4, NaN);\n \t\t\t}, `\"min\" param is not a number.\"`);\n \t\t});\n "
    }
  ],
  "fix_category": "Make deterministic",
  "root_cause_category": "Randomness",
  "root_cause_subcategory": NaN
}