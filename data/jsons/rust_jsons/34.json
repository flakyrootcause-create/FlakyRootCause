{
  "id": 34,
  "repo": "databend",
  "issue_url": "https://github.com/databendlabs/databend/issues/11260",
  "pr_url": "https://github.com/databendlabs/databend/pull/11261",
  "issue_description": "              This looks like a flaky test. I will fix it.\r\n```\r\n05_0001_set_var:                                                        [ FAIL ] - result differs with:\r\n--- /runner/_work/databend/databend/tests/suites/0_stateless/05_hints/05_0001_set_var.result\t2023-04-28 00:15:37.866486923 +0000\r\n+++ /runner/_work/databend/databend/tests/suites/0_stateless/05_hints/05_0001_set_var.stdout\t2023-04-28 00:19:13.660031675 +0000\r\n@@ -1,6 +1,6 @@\r\n-x\tx\r\n timezone\tAmerica/Los_Angeles\r\n x\tx\r\n+x\tx\r\n timezone\tAsia/Shanghai\r\n timezone\tAsia/Shanghai\tUTC\tSESSION\tSets the timezone.\tString\r\n storage_read_buffer_size\t1048576\r\n```\r\n\r\n_Originally posted by @TCeason in https://github.com/datafuselabs/databend/issues/11258#issuecomment-1526826926_\r\n            ",
  "files_changed": [
    {
      "filename": "tests/suites/0_stateless/05_hints/05_0001_set_var.sh",
      "status": "modified",
      "patch": "@@ -6,8 +6,8 @@ CURDIR=$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\n # mariadb mysql client has some bug, please use mysql offical client\n # mysql --version\n # mysql  Ver 8.0.32-0ubuntu0.20.04.2 for Linux on x86_64 ((Ubuntu))\n-echo \"select /*+SET_VAR(timezone='Asia/Shanghai')*/ name, value value from system.settings where name in ('timezone') union all (select /*+SET_VAR(timezone='America/Los_Angeles')*/ 'x','x');\" |  $MYSQL_CLIENT_CONNECT\n-echo \"select /*+SET_VAR(timezone='America/Los_Angeles')*/ name, value value from system.settings where name in ('timezone') union all (select /*+SET_VAR(timezone='Asia/Shanghai')*/ 'x','x');\" |  $MYSQL_CLIENT_CONNECT\n+echo \"select * from (select /*+SET_VAR(timezone='Asia/Shanghai')*/ name, value value from system.settings where name in ('timezone') union all (select /*+SET_VAR(timezone='America/Los_Angeles')*/ 'x','x')) order by name desc;\" |  $MYSQL_CLIENT_CONNECT\n+echo \"select * from (select /*+SET_VAR(timezone='America/Los_Angeles')*/ name, value value from system.settings where name in ('timezone') union all (select /*+SET_VAR(timezone='Asia/Shanghai')*/ 'x','x')) order by name desc;\" |  $MYSQL_CLIENT_CONNECT\n echo \"select /*+SET_VAR(timezone='Asia/Shanghai') */ * from system.settings where name = 'timezone';\" |  $MYSQL_CLIENT_CONNECT\n echo \"select /*+SET_VAR(timezone='Asia') SET_VAR(storage_read_buffer_size=200)*/ name, value from system.settings where name in ('timezone', 'storage_read_buffer_size')\" |  $MYSQL_CLIENT_CONNECT\n echo \"select /*+SET_VAR(timezone='Asia/Shanghai') SET_VAR(storage_read_buffer_size=200)*/ /*+SET_VAR(storage_read_buffer_size=100)*/name, /*+xx*/ value from system.settings where name in ('timezone', 'storage_read_buffer_size')\" |  $MYSQL_CLIENT_CONNECT"
    }
  ],
  "fix_category": "Sorting (Database Query)",
  "root_cause_category": "Unordered collections",
  "root_cause_subcategory": "Sorting"
}